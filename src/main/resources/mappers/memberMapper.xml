<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.demo.mapper.MemberMapper">

	<select id="login" resultType="member">
		<![CDATA[
			SELECT * FROM MEMBERS_TB WHERE MB_ID=#{id}
		]]>
	</select>
	
	<select id="getMember" resultType="member">
		<![CDATA[
			SELECT * FROM MEMBERS_TB WHERE MB_ID=#{mbId}
		]]>
	</select>
	
	<update id="updateAuth">
		<![CDATA[
			UPDATE MEMBERS_TB SET MB_AUTH='Y' WHERE MB_ID=#{mbId}
		]]>
	</update>

	<select id="checkId" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM MEMBERS_TB WHERE MB_ID=#{mbId}
		]]>
	</select>
	
	<update id="updateConDate">
		<![CDATA[
			UPDATE MEMBERS_TB SET MB_CONDT=SYSDATE WHERE MB_ID=#{id}
		]]>
	</update>

	<insert id="insert">
		<![CDATA[
			INSERT INTO MEMBERS_TB VALUES (#{mbId}, #{mbPw}, #{mbNm}, #{mbNick}, #{mbPhone}, #{mbEmail}, 
			#{mbZip}, #{mbAddr}, #{mbDeaddr}, 0, SYSDATE, NULL, #{mbAuthkey}, 'N')
		]]>
	</insert>
	
	<update id="update" parameterType="member">
		<![CDATA[
			UPDATE MEMBERS_TB SET MB_PW=#{mbPw}, MB_NM=#{mbNm}, MB_NICK=#{mbNick}, MB_PHONE=#{mbPhone},
			MB_EMAIL=#{mbEmail}, MB_ZIP=#{mbZip}, MB_ADDR=#{mbAddr}, MB_DEADDR=#{mbDeaddr} WHERE MB_ID=#{mbId}
		]]>
	</update>
	
	<select id="getBaskets" resultType="basket">
		<![CDATA[
			SELECT B.PD_NO, P.PD_IMG, P.PD_NM, P.PD_TAG, P.PD_SALE, B.BSK_QTY
			FROM PRODUCTS_TB P, BASKETS_TB B
			WHERE P.PD_NO = B.PD_NO AND B.MB_ID=#{mbId}
		]]>
	</select>

</mapper>